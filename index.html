<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trekantkalkulator</title>

<style>
body {
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#4facfe,#00f2fe);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

.calculator {
  background:white;
  padding:20px;
  border-radius:15px;
  width:90%;
  max-width:400px;
  box-shadow:0 10px 20px rgba(0,0,0,0.2);
  text-align:center;
}

#info {
  font-size:14px;
  margin-bottom:10px;
  color:#333;
}

.inputs input {
  width:80%;
  padding:10px;
  margin:6px auto;
  border-radius:8px;
  border:1px solid #ccc;
  display:block;
  text-align:center;
  font-size:16px;
}

button {
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:10px;
  background:#4caf50;
  color:white;
  font-size:16px;
  cursor:pointer;
}

button.clear { background:#f44336; }
button.dark { background:#444; margin-bottom:10px; }

#result {
  margin-top:10px;
  font-weight:bold;
}

svg {
  width:100%;
  height:200px;
  margin-top:10px;
}

/* DARK MODE */
body.dark {
  background: linear-gradient(135deg,#111,#333);
}

body.dark .calculator { background:#222; color:white; }
body.dark input { background:#333; color:white; border:1px solid #555; }
body.dark #info { color:#ccc; }
body.dark #result { color:#0f0; }
body.dark button { background:#555; }
body.dark button.clear { background:#f44336; }
body.dark button.dark { background:#888; }
</style>
</head>

<body>

<div class="calculator">

<button class="dark" onclick="toggleDarkMode()">ðŸŒ™ Dark mode</button>

<h2>Trekantkalkulator</h2>

<p id="info">
Fyll inn minst <b>3 verdier</b> (sider og/eller vinkler), sÃ¥ beregnes resten automatisk.
</p>

<div class="inputs">
  <input id="a" placeholder="Side a">
  <input id="b" placeholder="Side b">
  <input id="c" placeholder="Side c">

  <input id="A" placeholder="Vinkel A (Â°)">
  <input id="B" placeholder="Vinkel B (Â°)">
  <input id="C" placeholder="Vinkel C (Â°)">
</div>

<button onclick="solveTriangle()">Kalkuler</button>
<button class="clear" onclick="clearAll()">Slett alt</button>

<div id="result"></div>

<svg viewBox="0 0 200 160">
  <polygon points="40,140 160,140 100,30" fill="none" stroke="black" stroke-width="2"/>
  <text x="30" y="150">A</text>
  <text x="165" y="150">B</text>
  <text x="95" y="20">C</text>
</svg>

</div>

<script>
function toggleDarkMode() {
  document.body.classList.toggle("dark");
}

function solveTriangle() {
  let a = parseFloat(aInput.value);
  let b = parseFloat(bInput.value);
  let c = parseFloat(cInput.value);
  let A = parseFloat(AInput.value);
  let B = parseFloat(BInput.value);
  let C = parseFloat(CInput.value);

  let count = [a,b,c,A,B,C].filter(x => !isNaN(x)).length;
  if (count < 3) {
    result.innerText = "Du mÃ¥ fylle inn minst 3 verdier.";
    return;
  }

  // SSS
  if (!isNaN(a) && !isNaN(b) && !isNaN(c)) {
    A = cosRule(a,b,c);
    B = cosRule(b,c,a);
    C = 180 - A - B;
  }

  // SAS: a, b og C
  if (!isNaN(a) && !isNaN(b) && !isNaN(C)) {
    c = Math.sqrt(a*a + b*b - 2*a*b*Math.cos(toRad(C)));
    A = sinRule(a,c,C);
    B = 180 - A - C;
  }

  // SAS: a, c og B
  if (!isNaN(a) && !isNaN(c) && !isNaN(B)) {
    b = Math.sqrt(a*a + c*c - 2*a*c*Math.cos(toRad(B)));
    A = sinRule(a,b,B);
    C = 180 - A - B;
  }

  // SAS: b, c og A
  if (!isNaN(b) && !isNaN(c) && !isNaN(A)) {
    a = Math.sqrt(b*b + c*c - 2*b*c*Math.cos(toRad(A)));
    B = sinRule(b,a,A);
    C = 180 - A - B;
  }

  // ASA / AAS
  if (!isNaN(A) && !isNaN(B) && !isNaN(a)) {
    C = 180 - A - B;
    b = a * Math.sin(toRad(B)) / Math.sin(toRad(A));
    c = a * Math.sin(toRad(C)) / Math.sin(toRad(A));
  }

  aInput.value = a ?? "";
  bInput.value = b ?? "";
  cInput.value = c ?? "";
  AInput.value = A ?? "";
  BInput.value = B ?? "";
  CInput.value = C ?? "";

  result.innerText = "Alle verdier er nÃ¥ beregnet.";
}

function cosRule(x,y,z) {
  return Math.acos((x*x + y*y - z*z) / (2*x*y)) * 180/Math.PI;
}

function sinRule(x,y,Z) {
  return Math.asin(x * Math.sin(toRad(Z)) / y) * 180/Math.PI;
}

function toRad(deg) {
  return deg * Math.PI / 180;
}

function clearAll() {
  ["a","b","c","A","B","C"].forEach(id => document.getElementById(id).value="");
  result.innerText="";
}

const aInput = document.getElementById("a");
const bInput = document.getElementById("b");
const cInput = document.getElementById("c");
const AInput = document.getElementById("A");
const BInput = document.getElementById("B");
const CInput = document.getElementById("C");
const result = document.getElementById("result");
</script>

</body>
</html>
